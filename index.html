<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="הומפיוטר - יש בית למחשב שלך - חנות המחשבים של נווה יעקב והסביבה. מכירה ואחריות על מחשבים ניידים ונייחים, מעבדה מקצועית לכל סוגי התיקונים, ציוד היקפי וספק נטפרי.">
    
    <title>הומפיוטר - יש בית למחשב שלך | מכירת מחשבים, מעבדה ותיקון בנווה יעקב</title>
    
    <link rel="canonical" href="https://i0527685490-source.github.io/homputer1/">

    <meta property="og:title" content="הומפיוטר - יש בית למחשב שלך | מכירת מחשבים ומעבדה">
    <meta property="og:description" content="הומפיוטר - חנות המחשבים של נווה יעקב והסביבה. מכירת מחשבים ומעבדה מקצועית לכל סוגי התיקונים .">
    <meta property="og:url" content="https://i0527685490-source.github.io/homputer1/">
    
    <meta property="og:image" content="https://github.com/i0527685490-source/homputer1/blob/main/%D7%94%D7%9C%D7%95%D7%92%D7%95_%D7%A9%D7%9C_%D7%94%D7%95%D7%9E%D7%A4%D7%99%D7%95%D7%98%D7%A8-removebg-preview.png?raw=true">
    <meta property="og:image:width" content="51">
    <meta property="og:image:height" content="51">
    <meta property="og:type" content="website">
    <meta property="twitter:card" content="summary_large_image">
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <link rel="icon" href="https://github.com/i0527685490-source/homputer1/blob/main/%D7%94%D7%9C%D7%95%D7%92%D7%95_%D7%A9%D7%9C_%D7%94%D7%95%D7%9E%D7%A4%D7%99%D7%95%D7%98%D7%A8-removebg-preview.png?raw=true" sizes="96x96">
    <link rel="shortcut icon" href="https://github.com/i0527685490-source/homputer1/blob/main/%D7%94%D7%9C%D7%95%D7%92%D7%95_%D7%A9%D7%9C_%D7%94%D7%95%D7%9E%D7%A4%D7%99%D7%95%D7%98%D7%A8-removebg-preview.png?raw=true">

</head>


    <style>
        /* ==================== גלובלי - ערכת צבעים כחולה בלבד ==================== */
        :root {
            --primary-color: #0056b3; /* כחול כהה (עיקרי) */
            --secondary-color: #007bff; /* כחול ביניים (הדגשה) */
            --accent-color: #0091ff;   /* כחול בהיר (אקשן) - חדש */
            --background-light: #f5f7fa;
            --text-dark: #2c3e50;
            --text-light: #555;
            --shadow-light: rgba(0,0,0,0.1);
        }

        body {
            margin: 0;
            font-family: 'Heebo', sans-serif;
            background: var(--background-light);
            color: var(--text-dark);
            line-height: 1.6;
            scroll-behavior: smooth;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        h2 {
            color: var(--primary-color);
            text-align: right;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 10px;
            margin-top: 35px;
            margin-bottom: 25px;
            font-size: 28px;
            font-weight: 700;
        }
        section { display: none; padding: 20px 0 40px; }
        section.active { display: block; }
        iframe { border: none; width: 100%; min-height: 450px; border-radius: 12px; }

        textarea {
            height: 250px;
            min-height: 200px;
            resize: none;
        }
        
        /* ==================== כותרת עליונה (Header) ==================== */
        header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: #ffffff;
            padding: 15px 20px;
            box-shadow: 0 4px 12px var(--shadow-light);
        }
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        header .logo {
            height: 55px;
            width: auto;
            object-fit: contain;
            transition: transform 0.3s;
        }
        nav {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 5px;
        }
        nav a {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 600;
            font-size: 16px;
            padding: 10px 15px;
            border-radius: 25px;
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
        }
        nav a:hover {
            background: var(--background-light);
        }
        nav a.active-link {
            background: var(--primary-color);
            color: #fff;
            box-shadow: 0 3px 6px rgba(0, 86, 179, 0.4);
        }

        /* ==================== דף הבית (Home) ==================== */
        .hero-section {
            background: linear-gradient(135deg, var(--primary-color) 0%, #00aaff 100%);
            color: white;
            padding: 80px 30px;
            text-align: center;
            border-radius: 15px;
            margin-top: 25px;
            margin-bottom: 40px;
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.25);
        }
        .hero-section h1 {
            font-size: 42px;
            margin-bottom: 10px;
            font-weight: 800;
        }
        .hero-section p {
            font-size: 22px;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        .service-card {
            background: #ffffff;
            border-radius: 15px;
            padding: 30px;
            text-align: right;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            border-right: 5px solid var(--primary-color);
            display: flex;
            flex-direction: column;
        }
        .service-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.15);
        }
        .service-card .icon { font-size: 38px; color: var(--primary-color); margin-bottom: 15px; display: block; }

        /* ==================== מאמרים (Articles) ==================== */
        .articles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .article-button {
            background: #ffffff;
            border: 2px solid var(--secondary-color);
            border-radius: 15px;
            padding: 20px;
            text-align: right;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 150px;
        }

        .article-button:hover {
            background: var(--secondary-color);
            color: #fff;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .article-button:hover h3 {
             color: #fff;
        }

        .article-button h3 {
            margin: 0 0 10px;
            font-size: 20px;
            color: var(--primary-color);
            transition: color 0.3s;
        }

        .article-button p {
            margin: 0;
            font-size: 15px;
            color: var(--text-light);
            transition: color 0.3s;
        }

        .article-button:hover p {
            color: #f0f0f0;
        }

        /* ==================== מוצרים (Products) ==================== */
        #products .products-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 30px;
        }

        .filter-controls {
            position: sticky;
            top: 85px; 
            z-index: 500;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 15px;
            padding: 20px;
            background: #ffffff;
            border: 1px solid #e0e6f0;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            height: fit-content;
            grid-column: 1 / 2;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 8px;
            width: 100%;
            border-bottom: 1px dashed #eee;
            padding-bottom: 15px;
        }
        .filter-group:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .filter-group label {
            font-weight: 700;
            color: var(--primary-color);
        }
        
        /* סטייל ייעודי לשדה החיפוש */
        .filter-group input[type="text"] {
            width: 195px; 
            padding: 10px 18px; 
            border: 2px solid var(--primary-color); 
            border-radius: 30px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); 
            transition: all 0.3s;
            font-family: 'Heebo', sans-serif;
            font-size: 15px;
            text-align: right;
        }
        .filter-group input[type="text"]:focus {
             border-color: #00aaff;
             box-shadow: 0 0 0 4px rgba(0, 123, 255, 0.2);
             outline: none;
        }
        /* סוף סטייל ייעודי לשדה החיפוש */


        /* סגנון למחווני הטווח */
        .filter-group input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            background: #ddd;
            border-radius: 5px;
            outline: none;
            margin: 5px 0;
            cursor: pointer;
            transition: opacity .2s;
        }
        .filter-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--secondary-color);
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .filter-group input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--secondary-color);
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        /* סוף סגנון למחווני הטווח */

        .filter-group select {
            min-width: 100%;
            padding: 10px 18px;
            border-radius: 30px;
            border: 2px solid var(--primary-color);
            background-color: #ffffff;
            font-family: 'Heebo', sans-serif;
            font-size: 15px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }
        .filter-group select:focus {
            border-color: #00aaff;
            box-shadow: 0 0 0 4px rgba(0, 123, 255, 0.2);
            outline: none;
        }

        .product-title {
            grid-column: 1 / -1;
            background: #ffffff;
            color: var(--text-dark);
            font-weight: 700;
            font-size: 26px;
            padding: 15px 25px;
            border-radius: 10px;
            margin: 25px 0 15px;
            text-align: right;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            border-right: 8px solid var(--secondary-color);
            line-height: 1.2;
            transition: opacity 0.3s;
        }
        .products-grid.is-filtering .product-title {
            display: none;
        }
        .products-grid:not(.is-filtering) .product-title {
            display: block; 
        }

        .products-grid {
            grid-column: 2 / 3;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            padding-top: 0;
        }
        @media (max-width: 768px) {
            .products-grid {
                 grid-column: 1 / -1;
            }
        }

        /* כרטיס המוצר - שינוי צבע המחיר וכפתור האקשן לגווני כחול */
        .product-card {
            border: 1px solid #e0e6f0;
            border-radius: 18px;
            background: #fff;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            padding: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.18);
        }

        .product-card img {
            height: 160px;
            width: auto;
            object-fit: contain;
            margin: 0 auto 10px;
        }
        .product-card h3 {
            font-size: 22px;
            margin: 5px 0 5px;
            color: var(--primary-color);
            font-weight: 700;
        }
        .product-card p {
            font-size: 15px;
            color: var(--text-light);
            flex-grow: 1;
            margin-bottom: 15px;
        }
        .product-card .price {
            font-size: 34px;
            font-weight: 800;
            color: #003366; /* כחול כהה לבידול המחיר */
            margin: 5px 0 20px 0;
            padding-bottom: 5px;
        }
        .price-separator {
            border: none;
            border-top: 1px solid #e0e0e0;
            width: 80%;
            margin: 10px auto 20px auto;
        }
        .product-card a {
            background: var(--accent-color); /* כחול בהיר נקי */
            color: #fff;
            padding: 16px 20px;
            border-radius: 35px;
            text-decoration: none;
            font-weight: bold;
            font-size: 18px;
            transition: background 0.3s, transform 0.2s;
            box-shadow: 0 5px 10px rgba(0, 145, 255, 0.3); /* צל כחול */
            cursor: pointer;
        }
        .product-card a:hover {
            background: #0077cc; /* כחול כהה יותר בריחוף */
            transform: scale(0.98);
        }
        #no-products-message {
            grid-column: 1 / -1;
            padding: 30px;
            text-align: center;
            font-size: 20px;
            color: var(--text-light);
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            display: none;
        }

        /* ==================== יצירת קשר (Contact) - כפתורים כחולים ==================== */
        .contact-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .contact-button {
            background: #ffffff;
            border: 1px solid var(--secondary-color);
            border-radius: 8px;
            padding: 8px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .contact-button:hover {
            background: var(--secondary-color);
            color: #fff;
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(0,0,0,0.1);
        }
        .contact-button h3 {
            margin-top: 0;
            font-size: 18px;
            color: var(--primary-color);
            transition: color 0.3s;
        }
        .contact-button:hover h3 {
            color: #fff;
        }
        
        /* ==================== חלון קופץ (Modal) ==================== */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
            padding-top: 50px;
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 30px;
            border: 1px solid #888;
            width: 90%;
            max-width: 800px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
            position: relative;
            text-align: right;
            animation: fadeIn 0.3s;
        }

        .modal-content.article-modal {
             max-width: 950px; 
             margin: 3% auto;
        }

        .modal-content.article-modal h3 {
             font-size: 30px;
             color: var(--primary-color);
             border-bottom: 2px solid var(--secondary-color);
             padding-bottom: 10px;
        }

        .modal-content.article-modal p {
            font-size: 17px;
            margin-bottom: 20px;
            line-height: 1.8;
            text-indent: 10px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-content.small {
            max-width: 450px;
            margin: 15% auto;
            text-align: center;
        }

        .modal-content.small a {
             color: var(--accent-color); /* כחול */
             text-decoration: none;
             font-weight: 700;
             font-size: 20px;
             transition: color 0.3s;
        }
        .modal-content.small a:hover {
            background: #0077cc;
        }


        .close-button {
            color: #aaa;
            float: left;
            font-size: 38px;
            font-weight: bold;
            cursor: pointer;
            line-height: 20px;
            transition: color 0.3s;
        }
        .close-button:hover, .close-button:focus {
            color: #000;
            text-decoration: none;
        }

        /* ==================== צ'אט בוט מותאם אישית (Custom Chatbot) ==================== */
        #chatbot-toggle-btn {
            position: fixed !important; 
            bottom: 20px;
            right: 20px;
            z-index: 1500; /* מתחת למודלים אך מעל הכל */
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            border: none;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
            font-size: 28px;
            cursor: pointer;
            transition: transform 0.3s, background-color 0.3s;
            line-height: 60px; /* ממורכז אנכית */
            padding: 0;
            text-align: center;
        }

        #chatbot-toggle-btn:hover {
            background-color: var(--secondary-color);
            transform: scale(1.05);
        }

        #chatbot-container {
            position: fixed;
            bottom: 90px;
            right: 20px;
            z-index: 1500;
            width: 350px; /* כ-1/3 מרוחב דף ממוצע */
            height: 450px;
            background-color: #fefefe;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            display: none; /* מוסתר כברירת מחדל */
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
            flex-direction: column;
        }
        
        #chatbot-container.open {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        #chatbot-header {
            background-color: var(--primary-color);
            color: white;
            padding: 8px 15px; /* תוקן: הופחת ל-8px כדי להנמיך את הכותרת */
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
        }

        #chatbot-header h3 {
            margin: 0;
            font-size: 18px;
        }

        .close-chat-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            line-height: 1;
            padding: 0;
            margin-left: 5px;
            transition: opacity 0.2s;
        }
        .close-chat-btn:hover {
            opacity: 0.8;
        }

        #chatbot-iframe-wrapper {
             flex-grow: 1;
             height: 100%;
             width: 100%;
        }

        #chatbot-iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0 0 12px 12px;
        }

        /* רספונסיביות מלאה */
        @media (max-width: 768px) {
            /* ... (Responsive styles retained from previous version) ... */
             .modal-content {
                width: 100%;
                margin: 0;
                min-height: 100%;
                border-radius: 0;
                padding: 20px;
            }
             .filter-controls {
                position: relative;
                top: auto;
                width: auto;
                flex-direction: row;
                justify-content: space-between;
                align-items: flex-start;
                flex-wrap: wrap;
                margin-bottom: 25px;
                padding: 15px;
                background: #e6f0ff;
                border: none;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                gap: 15px;
            }
            .filter-group {
                width: 100%;
                padding-bottom: 0;
                border-bottom: none;
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                gap: 10px;
            }
            .filter-group:nth-child(2), .filter-group:nth-child(3) { /* כפתור חברה וטווחי מחיר */
                 width: 48%; /* חלוקת השורה לשניים */
                 flex-direction: column;
                 align-items: flex-start;
            }
            .filter-group:nth-child(1) { /* שדה החיפוש */
                 width: 100%;
            }
            
            /* רספונסיביות לצ'אט בוט */
            #chatbot-container {
                width: 100%;
                right: 0;
                bottom: 0;
                height: 100%;
                max-width: 100%;
                max-height: 100%;
                border-radius: 0;
                box-shadow: none;
            }
            #chatbot-header {
                 border-radius: 0;
            }
            #chatbot-iframe {
                 border-radius: 0;
            }
            #chatbot-toggle-btn {
                 bottom: 10px;
                 right: 10px;
            }
        }
    </style>
</head>
<body>

<header>
    <div class="header-container container">
        <a href="https://i0527685490-source.github.io/homputer1/" target="_blank">
            <img class="logo" src="https://github.com/i0527685490-source/homputer/blob/main/%D7%94%D7%9C%D7%95%D7%92%D7%95_%D7%A9%D7%9C_%D7%94%D7%95%D7%9E%D7%A4%D7%99%D7%95%D7%98%D7%A8-removebg-preview.png?raw=true" alt="לוגו הומפיוטר">
        </a>
        <nav>
            <a onclick="showSection('home', this)" data-section="home">דף הבית</a>
            <a onclick="showSection('products', this)" data-section="products">מחשבים</a>
            <a onclick="showSection('articles', this)" data-section="articles">מאמרים</a> 
            <a onclick="showSection('repair', this)" data-section="repair">הזמנת תיקון</a>
            <a onclick="showSection('contact', this)" data-section="contact">יצירת קשר</a>
        </nav>
    </div>
</header>

<div class="container">
<section id="home" class="active">
    <div class="hero-section" data-aos="fade-down">
        <h1>הומפיוטר - יש בית למחשב שלך</h1>
        <p>חנות המחשבים והמעבדה המקצועית בנווה יעקב והסביבה. שירות אמין, מהיר ומקצועי.</p>
        <a onclick="showSection('products', document.querySelector('nav a[data-section=\'products\']'))"
            style="cursor: pointer; display: inline-block; padding: 12px 25px; background: var(--accent-color); color: white; border-radius: 30px; font-weight: bold; margin-top: 20px; text-decoration: none; transition: background 0.3s;"
            data-aos="zoom-in" data-aos-delay="300">
            לרכישת מחשב חדש >>
        </a>
    </div>

    <h2 data-aos="fade-right">שירותים מרכזיים בהומפיוטר</h2>
    <div class="services-grid">
        <div class="service-card" data-aos="fade-up" data-aos-anchor-placement="top-bottom">
            <span class="icon">🖥️</span>
            <h3>מכירת מחשבים וציוד</h3>
            <p>מגוון רחב של מחשבים ניידים ונייחים מכל החברות המובילות, ציוד היקפי ואביזרים נלווים באיכות הגבוהה ביותר.</p>
        </div>
        <div class="service-card" data-aos="fade-up" data-aos-delay="100" data-aos-anchor-placement="top-bottom">
            <span class="icon">🛠️</span>
            <h3>מעבדת תיקונים מקצועית</h3>
            <p>אבחון ותיקון מהיר ומדויק לכל סוגי התקלות: חומרה, תוכנה, הסרת וירוסים, שדרוגים והתקנות תוכנה.</p>
        </div>
        <div class="service-card" data-aos="fade-up" data-aos-delay="200" data-aos-anchor-placement="top-bottom">
            <span class="icon">🛡️</span>
            <h3>שירות, תמיכה ואחריות</h3>
            <p>שירות לקוחות אישי, סבלני ואמין. אחריות יצרן מלאה על כל המחשבים הנמכרים בחנות ותמיכה מקצועית.</p>
        </div>
        <div class="service-card" data-aos="fade-up" data-aos-delay="300" data-aos-anchor-placement="top-bottom">
            <span class="icon">📍</span>
            <h3>החנות של נווה יעקב והסביבה</h3>
            <p>ממוקמים בלב השכונה, צמוד למרכז המסחרי, זמינים עבורכם בשעות הפעילות לנוחות מירבית.</p>
        </div>
    </div>
</section>

<section id="articles">
    <h2 data-aos="fade-right">מאמרים וטיפים לתחזוקת המחשב</h2>
    <p data-aos="fade-up">כאן תמצאו מידע חשוב שיעזור לכם לשמור על המחשב שלכם, למנוע תקלות יקרות ולעבוד בצורה יעילה יותר.</p>
    
    <div class="articles-grid">
        <div class="article-button" onclick="openArticle('damage')" data-aos="fade-up" data-aos-anchor-placement="top-bottom">
            <h3>5 הרגלים שיפגעו במחשב הנייד שלכם - ואיך למנוע אותם 💧</h3>
            <p>בדיקה פשוטה שתחסוך לכם אלפי שקלים. הימנעו מנזקי חום, מכות ונוזלים.</p>
        </div>

        <div class="article-button" onclick="openArticle('viruses')" data-aos="fade-up" data-aos-delay="100" data-aos-anchor-placement="top-bottom">
            <h3>וירוסים ונוזקות: 3 דרכים להישאר מוגנים ברשת 🛡️</h3>
            <p>הסבר פשוט על אנטי-וירוס, גיבויים ואופן הגלישה הנכון שישמור עליכם.</p>
        </div>

        <div class="article-button" onclick="openArticle('speed')" data-aos="fade-up" data-aos-delay="200" data-aos-anchor-placement="top-bottom">
            <h3>המחשב איטי? 4 פעולות פשוטות להאצת המחשב הביתי 🚀</h3>
            <p>ניקוי קבצים, ניהול תוכנות רקע ובדיקת שטח פנוי בכונן.</p>
        </div>
        
        <div class="article-button" onclick="openArticle('battery')" data-aos="fade-up" data-aos-delay="300" data-aos-anchor-placement="top-bottom">
            <h3>כך תשמרו על חיי הסוללה של המחשב הנייד לאורך זמן 🔋</h3>
            <p>האם כדאי להשאיר את המטען מחובר תמיד? כל המיתוסים והאמת.</p>
        </div>
        
        <div class="article-button" onclick="openArticle('backup')" data-aos="fade-up" data-aos-delay="400" data-aos-anchor-placement="top-bottom">
            <h3>גיבוי בענן לעומת גיבוי חיצוני: מה ההבדל ומה עדיף לבית העסק? ☁️</h3>
            <p>השוואה בין פתרונות גיבוי שונים וכיצד לבחור את האפשרות הבטוחה ביותר למידע שלכם.</p>
        </div>
        <div class="article-button" onclick="openArticle('buying')" data-aos="fade-up" data-aos-delay="500" data-aos-anchor-placement="top-bottom">
            <h3>כיצד לבחור את המחשב הנייד הנכון: 3 שאלות שחייבים לשאול לפני הקנייה 💡</h3>
            <p>מדריך קצר לבחירת מעבד, זיכרון (RAM) וגודל מסך המתאימים לצרכים שלכם.</p>
        </div>
        </div>
</section>

<section id="repair">
    <h2 data-aos="fade-right">הזמנת תיקון ואיסוף מכשיר</h2>
    <p data-aos="fade-up">מלאו את הפרטים המדויקים, ונחזור אליכם בהקדם לתיאום קבלה במעבדה באופן המהיר והנוח ביותר.</p>
    <div class="home-frame" data-aos="fade-up" data-aos-delay="100">
        <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdcDFr0AYM1sMMG5YI_mR0afsOWlH1CzU9IoYbFVEDuEPeTuw/viewform?usp=header"
                style="height: 2000px;" allowfullscreen></iframe> </div>
</section>

<section id="products">
    <h2 data-aos="fade-right">מגוון מחשבים ניידים מובילים</h2>

    <div class="products-layout">

        <div class="filter-controls" data-aos="fade-down">
            
            <div class="filter-group">
                <label for="search-input">חיפוש חופשי:</label>
                <input type="text" id="search-input" placeholder="הכנס מילה לחיפוש" oninput="filterProducts()">
            </div>
            <div class="filter-group">
                <label for="company-filter">סנן לפי חברה:</label>
                <select id="company-filter" onchange="filterProducts()">
                    <option value="all">כל החברות</option>
                    <option value="gigabyte">Gigabyte</option>
                    <option value="lenovo">Lenovo</option>
                    <option value="asus">Asus</option>
                    <option value="dell">Dell</option>
                    <option value="hp">HP</option>
                </select>
            </div>
            
            <div class="filter-group price-range-group">
                <label>טווח מחיר (₪):</label>
                <div id="price-slider-display" style="font-weight: 700; color: var(--text-dark); margin-bottom: 10px; text-align: center;"></div>
                
                <label for="min-price-slider" style="margin-top: 5px; font-size: 14px; font-weight: 500;">מחיר מינימום</label>
                <input type="range" id="min-price-slider" min="0" max="15000" value="0" step="500" oninput="updatePriceFilter()">
                
                <label for="max-price-slider" style="margin-top: 5px; font-size: 14px; font-weight: 500;">מחיר מקסימום</label>
                <input type="range" id="max-price-slider" min="0" max="15000" value="15000" step="500" oninput="updatePriceFilter()">
            </div>
        </div>

        <div class="products-grid">
            <div id="no-products-message">
                אופס! לא נמצאו מחשבים התואמים את המסננים שבחרת. נסו לשנות את אפשרויות הסינון.
            </div>
        </div>
    </div>
</section>

<section id="contact">
    <h2 data-aos="fade-right">יצירת קשר עם הומפיוטר</h2>
    <div class="contact-container">
        <div class="contact-button" onclick="openContactModal('message')" data-aos="fade-up">
            <h3>שלח הודעה 📝</h3>
        </div>

        <div class="contact-button" onclick="openContactModal('phone')" data-aos="fade-up" data-aos-delay="100">
            <h3>טלפון וזמינות 📞</h3>
        </div>
        <div class="contact-button" onclick="openContactModal('hours')" data-aos="fade-up" data-aos-delay="200">
            <h3>שעות פעילות החנות ⏰</h3>
        </div>
        <div class="contact-button" onclick="openContactModal('location')" data-aos="fade-up" data-aos-delay="300">
            <h3>מיקום החנות (נווה יעקב) 📍</h3>
        </div>

         </div>
</section>

</div>

<div id="orderModal" class="modal">
    <div class="modal-content">
        <span class="close-button" onclick="closeModal('orderModal')">×</span>
        <h3>הזמנת מחשב: <span id="productNameInModal"></span></h3>
        <p>נא למלא את פרטי יצירת הקשר ואתם תקבלו מייל עם פרטי ההזמנה המלאים. **פרטי המוצר והמחיר כבר נבחרו עבורכם**:</p>
        <iframe id="orderFormIframe" src="" frameborder="0" style="width: 100%; height: 1200px; border-radius: 8px;"></iframe> </div>
</div>

<div id="contactModal" class="modal">
    <div class="modal-content" id="contactModalContent">
        <span class="close-button" onclick="closeModal('contactModal')">×</span>
        <div id="contactModalBody">
            </div>
    </div>
</div>

<div id="articleModal" class="modal">
    <div class="modal-content article-modal">
        <span class="close-button" onclick="closeModal('articleModal')">×</span>
        <div id="articleContent">
            </div>
    </div>
</div>

<button id="chatbot-toggle-btn" onclick="toggleChatbot()" title="צ'אט בוט עזרה">
    💬
</button>

<div id="chatbot-container">
    <div id="chatbot-header">
        <h3>צ'אט תמיכה מהירה</h3>
        <button class="close-chat-btn" onclick="toggleChatbot()">×</button>
    </div>
    <div id="chatbot-iframe-wrapper">
        <iframe id="chatbot-iframe" 
            frameBorder="0" 
            src="https://widget.botsonic.com/CDN/index.html?service-base-url=https%3A%2F%2Fapi-bot.writesonic.com&token=410d83eb-fbe8-4469-b859-1ed5a13481cf&base-origin=https%3A%2F%2Fbot.writesonic.com&instance-name=Botsonic&standalone=true&page-url=https%3A%2F%2Fbot.writesonic.com%2Fbots%2F57af7324-6b18-4819-87e8-db30c07354be%2Fconnect">
        </iframe>
    </div>
</div>

<script src="products.js"></script>

<script>
// =========================================================================
// *** הגדרות טופס גוגל ***
// =========================================================================

// 1. כתובת ה-Embed של טופס הזמנת המוצר
const GENERAL_FORM_EMBED_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSdZc1rd3xDy3uBAJxWJ6MZXaGD6nasjldmUlMrvN2tAK-LweA/viewform?embedded=true';
// 2. המזהה של השדה בטופס גוגל שאליו נשלח את שם המוצר והמחיר המשולב
const PRODUCT_NAME_ENTRY_ID = 'entry.1050602991';
// 3. כתובת ה-Embed של טופס יצירת קשר
const CONTACT_FORM_EMBED_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSfOrZYlBDUdhoezDQ8yhHnYy2IF7uxoeP2vxuH3vO7sqwTBeA/viewform?embedded=true';

// =========================================================================
// *** תוכן המאמרים (עבור פונקציית openArticle) ***
// =========================================================================

const articlesContent = {
    'damage': {
        title: '5 הרגלים שיפגעו במחשב הנייד שלכם - ואיך למנוע אותם 💧',
        body: `
            <p><strong>1. חסימת פתחי האוורור:</strong> המחשב הנייד שלכם פולט חום. כאשר אתם מניחים אותו על שמיכה, כרית, או על הבטן, אתם חוסמים את פתחי האוורור הקטנים בתחתית. חסימה זו גורמת להתחממות יתר, האטת המעבד ופגיעה ארוכת טווח ברכיבים.
            <br><strong>הפתרון:</strong> השתמשו תמיד במשטח קשיח וישר (שולחן, משטח קירור ייעודי) כדי להבטיח זרימת אוויר חופשית.</p>
            
            <p><strong>2. טעינה קבועה ל-100%:</strong> אם אתם משתמשים במחשב נייד רוב היום כמחשב שולחני, והוא תמיד מחובר לחשמל, סוללת הליתיום נשחקת מהר יותר.
            <br><strong>הפתרון:</strong> נתקו את המטען כאשר הסוללה מגיעה ל-80% וחברו אותו שוב כאשר היא יורדת ל-20-30%. שימוש במצבי טעינה חכמים במידה והמחשב תומך בהם.</p>
            
            <p><strong>3. העברת המחשב כשהוא פועל:</strong> נענוע או טלטול של מחשב בזמן שהוא עדיין מפעיל תוכנות או כותב לדיסק (במיוחד אם יש לו כונן מכני - HDD) עלול לגרום ל-Data Corruption ואף לנזק פיזי לכונן.
            <br><strong>הפתרון:</strong> כבו את המחשב או העבירו אותו למצב 'שינה' (Sleep) לפני שאתם מעבירים אותו למקום אחר או מכניסים אותו לתיק.</p>

            <p><strong>4. אכילה ושתייה ליד המחשב:</strong> כוס קפה שנשפכת על המקלדת או פירורים שנכנסים מתחת למקשים הם המתכון הבטוח לביקור במעבדה.
            <br><strong>הפתרון:</strong> שמרו על מרחק בטיחות בין המזון והשתייה למחשב. במידת הצורך, השתמשו במגן מקלדת סיליקון.</p>

            <p><strong>5. כיבוי בכוח:</strong> כיבוי המחשב על ידי לחיצה ממושכת על כפתור ההדלקה (מלבד מקרי חירום) עלול לפגוע במערכת הקבצים ולגרום לתקלות תוכנה.
            <br><strong>הפתרון:</strong> השתמשו תמיד באפשרות 'כיבוי' (Shut Down) דרך תפריט 'התחל' על מנת לאפשר למערכת לסגור קבצים ותוכנות בצורה מסודרת.</p>
        `
    },
    'viruses': {
        title: 'וירוסים ונוזקות: 3 דרכים להישאר מוגנים ברשת 🛡️',
        body: `
            <p><strong>1. אנטי-וירוס מעודכן (Antivirus):</strong> תוכנת אנטי-וירוס איכותית היא קו ההגנה הראשון שלכם. ודאו שהיא מופעלת, מעודכנת באופן אוטומטי, ומבצעת סריקות תקופתיות. גם Windows Defender המובנה במערכות Windows חדשות מספק הגנה טובה, אך יש לוודא שהוא פעיל.</p>
            
            <p><strong>2. היזהרו מלינקים וקבצים חשודים:</strong> נוזקות רבות מופצות דרך מיילים (Phishing) או אתרים מתחזים. אם קיבלתם מייל מחברות שאינן מוכרות, או קישור שמבטיח כסף קל - הימנעו מללחוץ או לפתוח קבצים מצורפים. אם אינכם בטוחים, גשו לאתר החברה באופן ישיר במקום ללחוץ על הקישור במייל.</p>
            
            <p><strong>3. גיבוי קבוע (Backup):</strong> הגיבוי הוא לא הגנה מפני וירוסים, אבל הוא ההצלה שלכם במקרה של מתקפת כופרה (Ransomware), שנועלת את הקבצים שלכם. אם יש לכם גיבוי חיצוני עדכני, תוכלו לפרמט את המחשב ולשחזר את כל המידע שלכם ללא תשלום כופר. הקפידו לגבות את המידע החשוב שלכם על בסיס שבועי או חודשי.</p>
        `
    },
    'speed': {
        title: 'המחשב איטי? 4 פעולות פשוטות להאצת המחשב הביתי 🚀',
        body: `
            <p><strong>1. נקו את סייר הקבצים:</strong> קבצים זמניים, קבצי אינטרנט ישנים וקבצים בסל המיחזור תופסים מקום ומאיטים את המערכת. השתמשו בכלי ניקוי הדיסק המובנה של Windows או תוכנות צד שלישי (בזהירות) כדי לנקות שאריות מיותרות.</p>
            
            <p><strong>2. בטלו הפעלת תוכנות אוטומטית:</strong> תוכנות רבות (כגון סקייפ, ספוטיפיי, וואטסאפ למחשב) מוגדרות להיפתח אוטומטית עם הפעלת המחשב, מה שמאט משמעותית את זמן עליית המערכת ומעמיס על זיכרון ה-RAM.
            <br><strong>איך עושים זאת?</strong> היכנסו ל'מנהל המשימות' (Task Manager) -> לשונית 'הפעלה' (Startup) ובטלו תוכנות שאינן נחוצות מיידית.</p>
            
            <p><strong>3. עדכנו מנהלי התקנים (Drivers):</strong> דרייברים ישנים או פגומים עלולים לגרום לקריסות ולהאטות בלתי מוסברות. ודאו שמנהלי ההתקנים של כרטיס המסך, השבבים והרכיבים המרכזיים מעודכנים על ידי בדיקה באתרי היצרנים (Dell, HP, Lenovo).</p>

            <p><strong>4. ודאו שטח פנוי בכונן ה-SSD:</strong> כונני SSD (הכוננים המהירים יותר הנפוצים כיום) צריכים שטח פנוי מסוים כדי לתפקד ביעילות. אם הכונן שלכם מלא ב-90% ומעלה, המחשב יתחיל לפעול לאט יותר. מחקו קבצים גדולים או העבירו אותם לכונן חיצוני.</p>
        `
    },
    'battery': {
        title: 'כך תשמרו על חיי הסוללה של המחשב הנייד לאורך זמן 🔋',
        body: `
            <p><strong>האמת על חיבור קבוע לחשמל:</strong> בעבר, השארת המחשב מחובר תמיד גרמה לבלאי מהיר של הסוללה. כיום, מרבית המחשבים הניידים המודרניים (משנת 2015 ואילך) כוללים מעגלי הגנה חכמים המפסיקים את הטעינה כאשר הסוללה מגיעה ל-100%, ומפעילים אותה מחדש רק כשהיא יורדת מתחת לסף מסוים (לרוב 95%).
            <br><strong>אבל...:</strong> הטמפרטורה היא האויב הגדול ביותר של סוללות ליתיום. עבודה ממושכת כשהמחשב מחובר ומתחמם עלולה עדיין לקצר את חייה. אם אפשר, השאירו אותו בטמפרטורת החדר.</p>

            <p><strong>המלצה כללית:</strong>
            <ul>
                <li>אם המחשב משמש בעיקר כמחשב נייח, נסו להשתמש בתוכנות ניהול הסוללה של היצרן (כגון 'Lenovo Vantage' או 'MyHP') המאפשרות הגבלת טעינה ל-60% או 80%, מה שמאריך משמעותית את חיי הסוללה.</li>
                <li>בצעו 'מחזור פריקה-טעינה' פעם בחודש: פרקו את הסוללה עד כ-10-15% וטענו אותה מחדש ל-100% כדי לכייל את המחשב מחדש.</li>
                <li>הנמיכו את בהירות המסך: מסך בהיר הוא זולל הסוללה הגדול ביותר. הפחתו את הבהירות למינימום הנוח לעבודה.</li>
            </ul>
            </p>
        `
    },
    'backup': {
        title: 'גיבוי בענן לעומת גיבוי חיצוני: מה ההבדל ומה עדיף לבית העסק? ☁️',
        body: `
            <p><strong>גיבוי חיצוני (כונן נייד):</strong>
            <ul>
                <li><strong>יתרונות:</strong> מהירות גיבוי ושחזור גבוהה, שליטה מלאה על המידע, עלות חד-פעמית.</li>
                <li><strong>חסרונות:</strong> רגישות לנזק פיזי (שריפה, הצפה), דורש ניתוק ואחסון פיזי מחוץ למחשב כדי למנוע הידבקות בנוזקות (Ransomware), סכנת אובדן או גניבה.</li>
            </ul></p>
            
            <p><strong>גיבוי ענן (OneDrive, Google Drive, Backblaze):</strong>
            <ul>
                <li><strong>יתרונות:</strong> הגנה מוחלטת מפני נזק פיזי וגניבה, גישה למידע מכל מקום בעולם, גיבוי אוטומטי ותמיכה בשחזור גרסאות קודמות (מניעת נזקי כופרה).</li>
                <li><strong>חסרונות:</strong> דורש חיבור יציב לאינטרנט, עלות חודשית/שנתית (בד"כ לפי נפח), מהירות גיבוי ראשונית איטית.</li>
            </ul></p>

            <p><strong>המלצה:</strong> לעסקים או למשתמשים עם מידע קריטי, מומלץ ליישם את <strong>'כלל 3-2-1'</strong>: 3 עותקים של המידע, ב-2 סוגי מדיה שונים (כונן פנימי וענן), ו-1 מהם מאוחסן במיקום מחוץ לאתר (למשל, בענן).</p>
        `
    },
    'buying': {
        title: 'כיצד לבחור את המחשב הנייד הנכון: 3 שאלות שחייבים לשאול לפני הקנייה 💡',
        body: `
            <p><strong>1. מהי רמת השימוש והצרכים? (מעבד - CPU)</strong>
            <ul>
                <li><strong>שימוש בסיסי (גלישה, מיילים, לימודים):</strong> מעבדי Intel Core i3 או AMD Ryzen 3/5, מספיקים בהחלט.</li>
                <li><strong>שימוש רב-תכליתי (זום, עבודה משרדית, מולטיטאסקינג):</strong> מעבדי Intel Core i5 או AMD Ryzen 5 מומלצים לאיזון בין מחיר לביצועים.</li>
                <li><strong>שימוש מקצועי (גרפיקה, עריכת וידאו):</strong> יש לבחור מעבדי Intel Core i7 או AMD Ryzen 7 ומעלה, ובדגש על כרטיס גרפי נפרד.</li>
            </ul></p>
            
            <p><strong>2. כמה זיכרון (RAM) נחוץ?</strong>
            <ul>
                <li><strong>8GB:</strong> המינימום ההכרחי כיום. מתאים לגלישה ושימוש בסיסי.</li>
                <li><strong>16GB:</strong> ההמלצה הגורפת שלנו. זהו ה'מקום הנוסף' שיבטיח שהמחשב לא יאט כאשר פתוחים עשרות חלונות דפדפן ותוכנות שונות במקביל.</li>
                <li><strong>32GB ומעלה:</strong> רק למקצוענים (מתכנתים, גרפיקאים כבדים).</li>
            </ul></p>
            
            <p><strong>3. מהו גודל המסך המועדף? (ניידות מול נוחות)</strong>
            <ul>
                <li><strong>13.3-14 אינץ':</strong> ניידות מקסימלית ומשקל קל. אידיאלי לנסיעות ולמי שנושא את המחשב בתיק כל יום.</li>
                <li><strong>15.6 אינץ':</strong> הגודל הסטנדרטי והנפוץ ביותר. האיזון המושלם בין נוחות עבודה לניידות סבירה.</li>
                <li><strong>17 אינץ':</strong> נוחות מקסימלית (מסך גדול ומקלדת מלאה), אך ניידות נמוכה יחסית. מתאים כחלופה למחשב שולחני.</li>
            </ul></p>
        `
    }
};

// =========================================================================
// *** לוגיקת צ'אט בוט מותאמת אישית (Custom Chatbot Logic) ***
// =========================================================================

/**
 * פונקציה לניהול פתיחה/סגירה של חלונית הצ'אט בוט
 */
function toggleChatbot() {
    const container = document.getElementById('chatbot-container');
    
    // בדיקה האם החלון פתוח (על ידי נוכחות המחלקה 'open')
    const isOpen = container.classList.contains('open');
    
    if (isOpen) {
        // סגירה - הסרת המחלקה תפעיל את אנימציית המעבר
        container.classList.remove('open');
        // הסתרת האלמנט רק לאחר סיום המעבר (למנוע אינטראקציה)
        setTimeout(() => {
            container.style.display = 'none';
        }, 300); // 300ms זה משך ה-CSS transition
    } else {
        // פתיחה - הצגה מיידית, הוספת מחלקה תפעיל את אנימציית המעבר
        container.style.display = 'flex';
        // המתנה קצרה לפני הוספת המחלקה כדי לאפשר ל-display:flex להיכנס לתוקף לפני המעבר
        setTimeout(() => {
            container.classList.add('open');
        }, 10);
    }
}


// =========================================================================
// *** לוגיקת רינדור וסינון מוצרים - עודכנה לכלול מחווני טווח מחיר וחיפוש חופשי ***
// =========================================================================

/**
 * פונקציה לבנייה ורינדור של רשימת מוצרים נתונה
 * @param {Array} productsToDisplay - מערך המוצרים להצגה.
 * @param {boolean} isFiltering - האם כרגע מתבצע סינון (משפיע על הצגת כותרות הקטגוריות).
 */
function displayProducts(productsToDisplay, isFiltering) {
    const productsGrid = document.querySelector('.products-grid');
    const noProductsMessage = document.getElementById('no-products-message');
    productsGrid.innerHTML = ''; // ניקוי ה-Grid

    // הוספת המחלקה 'is-filtering' מסתירה את כותרות החברות דרך CSS
    productsGrid.classList.toggle('is-filtering', isFiltering);

    let productsHtml = '';
    let lastCompany = '';
    let foundProducts = 0;

    productsToDisplay.forEach((product, index) => {
        // הצגת כותרת החברה רק אם לא מתבצע סינון כלל (טעינה ראשונית)
        if (!isFiltering && product.category && product.category !== lastCompany) {
            productsHtml += `
                <div class="product-title group-${product.company}" data-company="${product.company}" data-aos="fade-up">
                    ${product.category}
                </div>
            `;
            lastCompany = product.category;
        }

        // בניית כרטיס המוצר
        productsHtml += `
            <div class="product-card" data-company="${product.company}" data-price="${product.price}" data-aos="fade-up" data-aos-delay="${(index % 3) * 100}" data-aos-anchor-placement="top-bottom">
                <img src="${product.imgSrc}" alt="${product.imgAlt}">
                <h3>${product.name}</h3>
                <p>${product.description}</p>
                <div class="price">₪${product.price.toLocaleString('he-IL')}</div>
                <hr class="price-separator">
                <a onclick="openModal('${product.name}', ${product.price})" style="cursor: pointer;">להזמנה כעת</a>
            </div>
        `;
        foundProducts++;
    });
    
    productsGrid.insertAdjacentHTML('afterbegin', productsHtml);

    if (foundProducts === 0) {
        noProductsMessage.style.display = 'block';
    } else {
        noProductsMessage.style.display = 'none';
    }
}

/**
 * פונקציה שמאתחלת את מחווני הטווח ומבצעת רינדור ראשוני.
 */
function initialRenderAndSort() {
    // בודק אם המערך allProducts הוגדר על ידי products.js
    if (typeof allProducts === 'undefined') {
        console.error("Error: allProducts array is not defined. Ensure products.js is loaded correctly.");
        return;
    }

    // מציאת המחיר המקסימלי האמיתי במערך המוצרים
    const maxPrice = allProducts.reduce((max, product) => Math.max(max, parseInt(product.price)), 0);
    
    const minSlider = document.getElementById('min-price-slider');
    const maxSlider = document.getElementById('max-price-slider');

    // הגדרת הערך המקסימלי של המחוונים בהתאם לנתונים
    minSlider.max = maxPrice;
    maxSlider.max = maxPrice;
    maxSlider.value = maxPrice; // הגדרה למקסימום כערך ברירת מחדל

    // עדכון תצוגת המחיר הראשונית
    updatePriceDisplay(0, maxPrice);

    // מיון ראשוני של המערך המלא:
    // לפי חברה (כדי שהכותרות יהיו רציפות) ואז מחיר (מהנמוך לגבוה)
    const sortedProducts = [...allProducts].sort((a, b) => {
        // מיון ראשי: לפי שם החברה/קטגוריה
        if (a.category < b.category) return -1;
        if (a.category > b.category) return 1;
        
        // מיון משני: לפי מחיר (נמוך לגבוה)
        return a.price - b.price; 
    });

    // קריאה לפונקציית ההצגה החדשה, isFiltering = false (כדי להציג כותרות)
    displayProducts(sortedProducts, false); 
}

/**
 * פונקציה לעדכון תצוגת טווח המחיר ב-HTML
 */
function updatePriceDisplay(minPrice, maxPrice) {
     const priceDisplay = document.getElementById('price-slider-display');
     const minVal = minPrice.toLocaleString('he-IL');
     const maxVal = maxPrice.toLocaleString('he-IL');
     
     priceDisplay.textContent = `₪${minVal} עד ₪${maxVal}`;
}


/**
 * פונקציה שנקראת על ידי מחווני הטווח - מטפלת בסדר וקוראת לסינון
 */
function updatePriceFilter() {
    const minSlider = document.getElementById('min-price-slider');
    const maxSlider = document.getElementById('max-price-slider');
    
    let minPrice = parseInt(minSlider.value);
    let maxPrice = parseInt(maxSlider.value);

    // ודא שהמינימום לא עולה על המקסימום
    if (minPrice > maxPrice) {
        // אם המינימום עקף את המקסימום, יש להחליף את הערכים.
        // נעדכן רק את המינימום כך שיהיה שווה למקסימום הנוכחי, ונסדר הפוך עבור המקסימום.
        if (event.target.id === 'min-price-slider') {
            minPrice = maxPrice;
            minSlider.value = maxPrice;
        } else {
             maxPrice = minPrice;
             maxSlider.value = minPrice;
        }
    }
    
    // עדכון תצוגת המחיר
    updatePriceDisplay(minPrice, maxPrice);
    
    // הפעלת הסינון
    filterProducts();
}


// פונקציה לסינון המוצרים - עודכנה לכלול חיפוש חופשי
function filterProducts() {
    // 1. קריאת כל ערכי הסינון
    const searchInput = document.getElementById('search-input').value.toLowerCase().trim();
    const companyFilter = document.getElementById('company-filter').value;
    const minSlider = document.getElementById('min-price-slider');
    const maxSlider = document.getElementById('max-price-slider');
    
    let minPrice = parseInt(minSlider.value);
    let maxPrice = parseInt(maxSlider.value);

    // ודא שהמינימום לא גדול מהמקסימום (למען הבטיחות)
    if (minPrice > maxPrice) {
        [minPrice, maxPrice] = [maxPrice, minPrice];
    }
    
    if (typeof allProducts === 'undefined') return;

    // 2. קביעה האם מתבצע סינון כלשהו
    const isSearching = searchInput.length > 0;
    const isPriceFiltered = (minPrice > 0 || maxPrice < parseInt(maxSlider.max));
    const isFiltering = (companyFilter !== 'all' || isPriceFiltered || isSearching);

    // 3. סינון המוצרים מהמערך המלא
    const filteredProducts = allProducts.filter(product => {
        const price = parseInt(product.price);
        const company = product.company;

        // סינון חברה
        let companyMatch = (companyFilter === 'all' || company === companyFilter);
        
        // סינון מחיר
        let priceMatch = (price >= minPrice && price <= maxPrice);
        
        // סינון חיפוש חופשי
        let searchMatch = true;
        if (isSearching) {
            // בדיקה אם שאילתת החיפוש נמצאת בשם, בתיאור, או בחברה (Case-insensitive)
            const searchText = `${product.name} ${product.description} ${product.category} ${product.company}`.toLowerCase();
            searchMatch = searchText.includes(searchInput);
        }

        // שילוב כל המסננים
        return companyMatch && priceMatch && searchMatch; 
    });

    // 4. מיון והצגה
    filteredProducts.sort((a, b) => a.price - b.price);
    displayProducts(filteredProducts, isFiltering);
}


// =========================================================================
// *** פונקציות עזר (ללא שינוי מהותי) ***
// =========================================================================

/**
 * פונקציה להצגת סקשנים וניהול כפתורי הניווט.
 * @param {string} id - מזהה ה-section להצגה (למשל: 'home', 'products').
 * @param {HTMLElement} element - אלמנט הקישור שנלחץ (עבור סימון כפעיל).
 */
function showSection(id, element) {
    // הסתרת כל הסקשנים והסרת סימון פעיל מכל הקישורים
    document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
    document.querySelectorAll('nav a').forEach(a => a.classList.remove('active-link'));
    
    // הצגת הסקשן הרצוי
    const targetSection = document.getElementById(id);
    if (targetSection) {
        targetSection.classList.add('active');
    }
    
    // סימון הקישור כפעיל
    if (element) {
        element.classList.add('active-link');
    }
}

// פונקציה: פתיחת חלון קופץ עבור הזמנת מוצר
function openModal(productName, productPrice) {
    const modal = document.getElementById('orderModal');
    const iframe = document.getElementById('orderFormIframe');
    const nameSpan = document.getElementById('productNameInModal');

    const fullProductNameWithPrice = `${productName} | מחיר: ₪${productPrice}`;

    // בונה את כתובת ה-URL עם המחרוזת המאוחדת
    const prefilledUrl = `${GENERAL_FORM_EMBED_URL}&${PRODUCT_NAME_ENTRY_ID}=${encodeURIComponent(fullProductNameWithPrice)}&usp=pp_url`;

    nameSpan.textContent = fullProductNameWithPrice;

    // טעינת טופס גוגל בתוך ה-iframe
    iframe.src = prefilledUrl;

    modal.style.display = 'block';

    // סגירה בלחיצה מחוץ לחלון
    window.onclick = function(event) {
        if (event.target == modal) {
            closeModal('orderModal');
        }
    }
}

// פונקציה חדשה: פתיחת חלון קופץ עבור מאמרים
function openArticle(articleId) {
    const modal = document.getElementById('articleModal');
    const contentDiv = document.getElementById('articleContent');
    const article = articlesContent[articleId];

    if (!article) return;

    contentDiv.innerHTML = `<h3>${article.title}</h3>${article.body}`;
    modal.style.display = 'block';

    window.onclick = function(event) {
        if (event.target == modal) {
            closeModal('articleModal');
        }
    }
}

// פונקציה: פתיחת חלון קופץ עבור יצירת קשר (טלפון, שעות, מיקום, טופס)
function openContactModal(type) {
    const modal = document.getElementById('contactModal');
    const modalContent = document.getElementById('contactModalContent');
    const modalBody = document.getElementById('contactModalBody');
    let title, content, isSmall = true;

    // איפוס תוכן וגדלים
    modalBody.innerHTML = '';
    modalContent.classList.remove('small');
    modalContent.style.maxWidth = ''; // איפוס רוחב מקסימלי

    switch (type) {
        case 'message':
            title = 'שלח הודעה 📝';
            content = `<iframe src="${CONTACT_FORM_EMBED_URL}" frameborder="0" style="width: 100%; height: 1000px; border-radius: 8px;"></iframe>`;
            isSmall = false; // טופס הוא גדול
            modalContent.style.maxWidth = '600px'; // הגבלת רוחב הטופס לגודל סביר
            break;
        case 'phone':
            title = 'מספר טלפון 📞';
            // הפיכת מספר הטלפון לקישור tel:
            content = `<p><a href="tel:0527685490" dir="ltr">052-7685490</a></p><p>מומלץ לשלוח הודעה מראש.</p>`;
            break;
        case 'hours':
            title = 'שעות פעילות החנות ⏰';
            content = `<p>א'-ה': <strong>15:00 - 18:00</strong></p><p>א'-ה': <strong>21:00 - 23:00</strong> </p>`;
            break;
        case 'location':
            title = 'מיקום החנות 📍';
            content = `<p><strong>ויקטור ויוליוס 606, נווה יעקב, ירושלים.</strong></p><p>ליד המרכז המסחרי, צמוד לאלקטרוניקס.</p>`;
            break;
    }

    // הוספת תוכן
    modalBody.innerHTML = `<h3>${title}</h3>${content}`;

    // עדכון גודל ופתיחה
    if (isSmall) {
        modalContent.classList.add('small');
    }
    modal.style.display = 'block';

    // סגירה בלחיצה מחוץ לחלון
    window.onclick = function(event) {
        if (event.target == modal) {
            closeModal('contactModal');
        }
    }
}

// פונקציה: סגירת החלון הקופץ
function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    modal.style.display = 'none';

    // איפוס ה-iframe של הזמנת מוצר
    if (modalId === 'orderModal') {
        document.getElementById('orderFormIframe').src = "";
    }

    // איפוס פונקציית ה-window.onclick
    window.onclick = null;
}


/**
 * פונקציה לטעינת דף, טיפול בפרמטר Query וייזום ספריית ההנפשות.
 */
function initializePage() {
    // ייזום AOS
    AOS.init({
      duration: 800, 
      once: true 
    });
    
    // קריאת פרמטר ה-Query
    const urlParams = new URLSearchParams(window.location.search);
    const targetSectionId = urlParams.get('section');
    
    let activeSectionId = 'home';
    let activeLinkElement = document.querySelector('nav a[data-section="home"]');

    if (targetSectionId) {
        const potentialLink = document.querySelector(`nav a[data-section="${targetSectionId}"]`);
        if (potentialLink) {
            activeSectionId = targetSectionId;
            activeLinkElement = potentialLink;
        }
    }

    // הצגת הסקשן הרלוונטי
    showSection(activeSectionId, activeLinkElement);
    
    // קריאה לפונקציית הרינדור והמיון הראשונית
    if (typeof allProducts !== 'undefined') {
        initialRenderAndSort(); 
    }
}

// ייזום לאחר טעינת כל רכיבי ה-DOM
document.addEventListener('DOMContentLoaded', initializePage);
</script>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>


</body>
</html>
